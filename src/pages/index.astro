---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Home from './home.astro';
---

<Layout title="ACM Web">
<main>
  <Navbar/>
  <Home/>
  <div id="about" style="height: 100vh; border: 3px solid red;">About Section</div>
  <div id="contact" style="height: 100vh; border: 3px solid red;">Contact Section</div>
  <div id="join" style="height: 100vh; border: 3px solid red;">Join Section</div>
</main>
</Layout>

<style>
	main{
		background: rgb(52,37,114);
		background: linear-gradient(180deg, rgba(52,37,114,1) 0%, rgba(47,39,57,1) 100%);
	}
</style>

<script is:inline>
  (function() {
    const navbar = document.getElementById("navbar-container");
    const aboutSection = document.getElementById("about");

    if(navbar === null || aboutSection === null) return;
    
    function setMargin(currentScroll) {
      const navbarHeight = navbar.offsetHeight;
      const endAppear = aboutSection.offsetTop;
      const startAppear = endAppear - navbarHeight;

      if(currentScroll <= startAppear) {
        navbar.style.marginTop = `-${navbarHeight + 10}px`;
      } else if(currentScroll >= endAppear) {
        navbar.style.marginTop = "0px";
      } else {
        let interpolatePercent = navbarHeight * (endAppear - currentScroll) / (endAppear - startAppear);
        navbar.style.marginTop = `-${interpolatePercent}px`;
      }
    }

    setMargin(window.scrollY);

    document.addEventListener("scroll", (e) => {
      setMargin(window.scrollY);
    });

  })();
</script>
